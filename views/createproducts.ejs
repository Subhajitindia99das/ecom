<%- include('./partials/header') %>

<% if (!user || user.role !== "owner") { %>
    <h2 class="text-center text-red-600 mt-10">Access Denied</h2>
<% return; } %>

<% if (success && success.length > 0) { %>
    <div class="absolute top-5 left-1/2 -translate-x-1/2 p-3 rounded-md bg-blue-500">
        <span class="text-white"><%= success %></span>
    </div>
<% } %>

<div class="min-h-screen flex">
    <!-- LEFT -->
    <div class="w-[25%] p-6">
        <a class="block mb-2" href="/owners/admin">Create Product</a>
    </div>

    <!-- RIGHT -->
    <main class="w-3/4 bg-white p-8 shadow ml-4">
        <!-- CREATE -->
        <h2 class="text-xl font-bold mb-4">Create New Product</h2>

        <form action="/products/create" method="post" enctype="multipart/form-data">
            <input name="image" type="file" required>
            <input name="name" placeholder="Name" class="border p-2 w-full my-2">
            <input name="price" placeholder="Price" class="border p-2 w-full my-2">
            <input name="discount" placeholder="Discount" class="border p-2 w-full my-2">
            <input name="bgcolor" placeholder="Bg Color" class="border p-2 w-full my-2">
            <input name="panelcolor" placeholder="Panel Color" class="border p-2 w-full my-2">
            <input name="textcolor" placeholder="Text Color" class="border p-2 w-full my-2">

            <button class="bg-blue-500 text-white px-4 py-2 mt-2">Create</button>
        </form>

        <!-- LIST -->
        <h2 class="text-xl font-bold mt-10 mb-4">All Products</h2>

        <% products.forEach(product => { %>
            <div class="border p-3 flex justify-between mb-2">
                <span><%= product.name %></span>

                <div class="flex gap-3">
                    <form action="/products/edit/<%= product._id %>" method="get">
                        <button class="text-blue-600">Edit</button>
                    </form>

                    <form action="/products/delete/<%= product._id %>" method="post">
                        <button class="text-red-600">Delete</button>
                    </form>
                </div>
            </div>
        <% }) %>
    </main>
</div>

<%- include('./partials/footer') %>
