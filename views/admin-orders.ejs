<%- include('./partials/header') %>

<!-- ================= BACKGROUND ================= -->
<div class="fixed inset-0 -z-10
            bg-gradient-to-br
            from-white via-slate-100 to-white
            dark:from-black dark:via-zinc-900 dark:to-black">
</div>

<!-- ================= ADMIN ORDERS ================= -->
<div class="min-h-screen px-4 md:px-20 pt-32 pb-16">

  <div class="max-w-6xl mx-auto">

    <h2 class="text-3xl font-semibold mb-10">
      All Orders
    </h2>

    <div class="space-y-8">
      <% orders.forEach(order => { %>

        <!-- ================= ORDER CARD ================= -->
        <div
          class="rounded-3xl
                 bg-white/25 dark:bg-black/30
                 backdrop-blur-3xl
                 border border-white/30
                 shadow-[0_30px_80px_rgba(0,0,0,0.25)]
                 p-8">

          <!-- HEADER -->
          <div class="flex flex-col md:flex-row md:justify-between md:items-center gap-6 mb-6">

            <div>
              <p class="text-sm opacity-60">User</p>
              <p class="font-medium break-all">
                <%= order.user.email %>
              </p>
            </div>

            <div class="flex flex-wrap gap-6 items-center">

              <span
                class="px-4 py-1.5 rounded-full text-sm
                <%=
                  order.status === 'Completed'
                    ? 'bg-green-500/20 text-green-600'
                    : order.status === 'Cancelled'
                    ? 'bg-red-500/20 text-red-500'
                    : 'bg-yellow-500/20 text-yellow-600'
                %>">
                <%= order.status %>
              </span>

              <p class="font-semibold text-green-500">
                ₹ <%= order.totalAmount %>
              </p>

            </div>
          </div>

          <!-- PRODUCTS -->
          <div class="mb-6">
            <p class="text-sm opacity-60 mb-3">
              Products
            </p>

            <ul class="space-y-2">
              <% order.products.forEach(p => { %>
                <li
                  class="flex justify-between text-sm
                         bg-white/40 dark:bg-white/10
                         rounded-xl px-4 py-2">
                  <span><%= p.name %></span>
                  <span>₹ <%= p.price %></span>
                </li>
              <% }) %>
            </ul>
          </div>

          <!-- STATUS UPDATE -->
          <form
            action="/owners/orders/<%= order._id %>/status"
            method="post"
            class="flex flex-col sm:flex-row gap-4 sm:items-center">

            <select
              name="status"
              class="glass-select">

              <option value="Pending" <%= order.status === "Pending" ? "selected" : "" %>>
                Pending
              </option>

              <option value="Completed" <%= order.status === "Completed" ? "selected" : "" %>>
                Completed
              </option>

              <option value="Cancelled" <%= order.status === "Cancelled" ? "selected" : "" %>>
                Cancelled
              </option>
            </select>

            <button
              class="px-6 py-2 rounded-full
                     bg-gradient-to-r from-blue-500 to-blue-400
                     text-white text-sm font-medium
                     shadow-[0_12px_30px_rgba(59,130,246,0.4)]
                     hover:opacity-90 transition">
              Update Status
            </button>
          </form>

        </div>

      <% }) %>
    </div>

  </div>
</div>

<!-- ================= GLASS SELECT ================= -->
<style>
.glass-select {
  padding: 0.6rem 1rem;
  border-radius: 9999px;
  background: rgba(255,255,255,0.35);
  border: 1px solid rgba(255,255,255,0.4);
  color: #000;
}
.dark .glass-select {
  background: rgba(255,255,255,0.1);
  color: #fff;
}
.glass-select:focus {
  outline: none;
  border-color: #60a5fa;
}
</style>

<%- include('./partials/footer') %>